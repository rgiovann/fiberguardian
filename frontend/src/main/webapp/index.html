<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>FiberGuardian - Tela Principal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/c0d30aa2de.js" crossorigin="anonymous"></script>
    <style>
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            margin: 0;
        }

        .main-wrapper {
            flex: 1;
            display: flex;
        }

        .sidebar {
            width: 250px;
            background-color: #84c3ec;
            color: #fff;
        }

        .sidebar a {
            color: #000000;
            text-decoration: none;
            font-weight: 600;
        }

        .sidebar a:hover {
            color: #fff;
            background-color: #495057;
            font-weight: 800;
        }

        .sidebar .nav-link.active {
            background-color: #495057;
            color: #fff;
        }

        .content {
            flex-grow: 1;
            padding: 20px;
        }

        .sidebar .menu-header {
            padding: 1rem;
            font-size: 1.25rem;
            font-weight: bold;
            background-color: #212529;
            text-align: center;
        }

        footer {
            background-color: #cae5f3;
            text-align: center;
            padding: 0.75rem;
            font-size: 0.8rem;
            border-top: 1px solid #dee2e6;
            font-weight: 600;
        }

        /* ALTERADO: divis√≥ria bonita com sombra suave e sem intera√ß√£o */
        .logo-divider {
            height: 2px;
            background: linear-gradient(to right, #ffffff33, #ffffffaa, #ffffff33);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            pointer-events: none;
            -webkit-user-select: none;
            user-select: none;
        }

        /* ALTERADO: container isolado da logo + divisor */
        .logo-container {
            background-color: #edf0f3;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1rem 0;
            -webkit-user-select: none;
            user-select: none;
            border-radius: 50%;
            border-color: #92aac2;
            border-width: 2px;
            border-style: solid;

        }

        .logo-container img {
            max-height: 170px;
            pointer-events: none;
            -webkit-user-select: none;
            user-select: none;
        }
    </style>
</head>

<body>
    <div class="main-wrapper">
        <nav class="sidebar d-flex flex-column p-2">

            <!-- ALTERADO: logo e divis√≥ria separados da menu-header -->
            <div class="logo-container">
                <img src="assets/img/logo-fiberguardian.png" alt="FiberGuardian Logo" class="img-fluid mb-2">
                <!-- <div class="logo-divider w-100 my-2"></div> -->
            </div>

            <!-- Menu come√ßa aqui -->
            <ul class="nav nav-pills flex-column" id="menu">
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="collapse" href="#menu-cadastros" role="button"
                        aria-expanded="false">Cadastros</a>
                    <div class="collapse" id="menu-cadastros">
                        <ul class="nav flex-column ms-3">
                            <li class="nav-item"><a class="nav-link" href="#"
                                    onclick="FiberGuardian.carregarPagina('tela_recebimento.html')">Recebimentos</a>
                            </li>
                            <li class="nav-item"><a class="nav-link" href="#">Fornecedor</a></li>
                            <li class="nav-item"><a class="nav-link" href="#">Produto</a></li>
                        </ul>
                    </div>
                </li>

                <li class="nav-item mt-2">
                    <a class="nav-link" data-bs-toggle="collapse" href="#menu-laboratorio" role="button"
                        aria-expanded="false">Laborat√≥rio</a>
                    <div class="collapse" id="menu-laboratorio">
                        <ul class="nav flex-column ms-3">
                            <li class="nav-item"><a class="nav-link" href="#">Cadastrar Resultados</a></li>
                            <li class="nav-item"><a class="nav-link" href="#">Relat√≥rios</a></li>
                        </ul>
                    </div>
                </li>

                <li class="nav-item mt-2">
                    <a class="nav-link" data-bs-toggle="collapse" href="#menu-engenharia" role="button"
                        aria-expanded="false">Engenharia</a>
                    <div class="collapse" id="menu-engenharia">
                        <ul class="nav flex-column ms-3">
                            <li class="nav-item"><a class="nav-link" href="#">Cadastrar Parecer</a></li>
                            <li class="nav-item"><a class="nav-link" href="#">Relat√≥rios</a></li>
                        </ul>
                    </div>
                </li>

                <li class="nav-item mt-2">
                    <a class="nav-link" data-bs-toggle="collapse" href="#menu-perfil" role="button"
                        aria-expanded="false">Gest√£o
                        De Usu√°rios</a>
                    <div class="collapse" id="menu-perfil">
                        <ul class="nav flex-column ms-3">
                            <li class="nav-item"><a class="nav-link" href="#">Listar Usu√°rios</a></li>
                            <li class="nav-item"><a class="nav-link" href="#">Cadastrar Novo Usu√°rio</a></li>
                            <li class="nav-item"><a class="nav-link" href="#">Alterar Perfil de Usu√°rio</a></li>
                            <li class="nav-item"><a class="nav-link" href="#">Bloquear/Desbloquear Usu√°rio</a></li>
                        </ul>
                    </div>
                </li>
            </ul>
        </nav>

        <main class="content" id="conteudo-principal">
            <h3>Bem-vindo ao FiberGuardian</h3>
            <p>Selecione uma op√ß√£o no menu lateral para come√ßar.</p>
        </main>
    </div>

    <footer class="text-start">
        <i class="fas fa-box"></i>
        Projeto elaborado pelos alunos Giovanni, Siegrid, Renata e Ven√¢ncio da turma 2025 do curso da Blusoft Entra21
    </footer>

    <script>
        // Garante que o namespace FiberGuardian exista no escopo global
        window.FiberGuardian = window.FiberGuardian || {};

        /**
         * Mapeia p√°ginas HTML para seus scripts JS correspondentes.
         * A chave √© o nome da p√°gina (parcial ou completo) e o valor √© o caminho do script associado.
         */
        const pageToScriptMap = {
            'tela_recebimento.html': 'assets/js/tela_recebimento.js'
            // Ex: 'cadastro_usuario.html': 'assets/js/cadastro_usuario.js'
        };

        /**
         * Carrega dinamicamente uma p√°gina HTML e seu script JS associado.
         * 
         * @param {string} pagina - Caminho relativo do HTML a ser carregado.
         */
        FiberGuardian.carregarPagina = function (pagina) {
            fetch(pagina)
                .then(resposta => {
                    if (!resposta.ok) throw new Error("Erro ao carregar a p√°gina.");
                    return resposta.text();
                })
                .then(html => {
                    // Injeta o HTML carregado no elemento principal da aplica√ß√£o
                    document.getElementById("conteudo-principal").innerHTML = html;

                    // Verifica se h√° script associado √† p√°gina
                    const scriptPath = pageToScriptMap[pagina];

                    if (scriptPath) {
                        const script = document.createElement('script');
                        script.src = scriptPath;

                        // Ap√≥s carregar o script, identifica e inicializa o m√≥dulo JS correto
                        script.onload = function () {
                            console.log(`‚úÖ Script carregado: ${scriptPath}`);

                            /**
                             * Transforma 'assets/js/tela_recebimento.js' em 'TelaRecebimento':
                             * - Remove o caminho do diret√≥rio
                             * - Remove extens√£o '.js'
                             * - Substitui underscores por espa√ßo
                             * - Capitaliza palavras (camel-case)
                             * - Remove espa√ßos
                             */
                            const nomeModulo = scriptPath
                                .replace(/^.*\//, '')                     // 'tela_recebimento.js'
                                .replace('.js', '')                       // 'tela_recebimento'
                                .replace(/_/g, ' ')                       // 'tela recebimento'
                                .replace(/(^\w|\s\w)/g, m => m.toUpperCase()) // 'Tela Recebimento'
                                .replace(/\s+/g, '');                     // 'TelaRecebimento'

                            console.log(`üîç M√≥dulo identificado: [${nomeModulo}]`);

                            // Inicializa o m√≥dulo se estiver corretamente registrado no namespace
                            if (FiberGuardian[nomeModulo] && typeof FiberGuardian[nomeModulo].init === 'function') {
                                console.log(`üöÄ Inicializando m√≥dulo: [${nomeModulo}]`);
                                FiberGuardian[nomeModulo].init();
                            } else {
                                console.warn(`‚ö†Ô∏è M√≥dulo [${nomeModulo}] n√£o encontrado ou n√£o possui init().`);
                            }
                        };

                        // Anexa dinamicamente o script ao <body>
                        document.body.appendChild(script);
                    }
                })
                .catch(erro => {
                    console.error('‚ùå Falha ao carregar conte√∫do:', erro);
                    document.getElementById("conteudo-principal").innerHTML = "<p>Erro ao carregar conte√∫do.</p>";
                });
        };
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>